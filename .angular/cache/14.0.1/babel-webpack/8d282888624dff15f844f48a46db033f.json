{"ast":null,"code":"import { comuni } from '../../models/comune';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Services/restapiservice.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction RegioniListComponent_option_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const regione_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", regione_r4.ID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(regione_r4.Name);\n  }\n}\n\nfunction RegioniListComponent_div_12_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const province_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", province_r6.ID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", province_r6.Name, \" \");\n  }\n}\n\nfunction RegioniListComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2, \"Provincia\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 3);\n    i0.ɵɵlistener(\"change\", function RegioniListComponent_div_12_Template_select_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.changeProvincia($event));\n    });\n    i0.ɵɵelementStart(4, \"option\");\n    i0.ɵɵtext(5, \"seleziona provincia\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, RegioniListComponent_div_12_option_6_Template, 2, 2, \"option\", 4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.provSelected);\n  }\n}\n\nfunction RegioniListComponent_div_14_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const comune_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", comune_r10.ID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(comune_r10.Name);\n  }\n}\n\nfunction RegioniListComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2, \"Comune\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 3);\n    i0.ɵɵlistener(\"change\", function RegioniListComponent_div_14_Template_select_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.changeComune($event));\n    });\n    i0.ɵɵelementStart(4, \"option\");\n    i0.ɵɵtext(5, \"seleziona comune\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, RegioniListComponent_div_14_option_6_Template, 2, 2, \"option\", 4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.comSelected);\n  }\n}\n\nfunction RegioniListComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"a\", 9);\n    i0.ɵɵtext(2, \"view\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport let RegioniListComponent = /*#__PURE__*/(() => {\n  class RegioniListComponent {\n    constructor(callApiService) {\n      this.callApiService = callApiService; // this.regioneList = regioni;\n\n      this.regioneList = [];\n      this.provSelectedList = [];\n      this.comSelected = comuni;\n      this.isVisibleLink = false;\n    }\n\n    // province;\n    ngOnInit() {\n      this.getAllRegioniFromAPI();\n      this.provSelectedList = [];\n      this.comSelected = [];\n    } // tslint:disable-next-line: typedef\n\n\n    getAllRegioniFromAPI() {\n      console.log('getAllRegioniFromAPI - Before this.callApiService.getRegioni');\n      this.callApiService.getRegioni().subscribe(result => {\n        console.log('result: ' + result);\n        this.regioneList = result;\n        console.log('this.regioneList: ' + this.regioneList);\n      }, error => {\n        console.log('failed calc', error);\n      });\n    } // tslint:disable-next-line: typedef\n\n\n    getProvinceOfIdRegioneFromAPI(idReg) {\n      console.log('getProvinceOfIdRegioneFromAPI - Before this.callApiService.getProvinceByIdRegione');\n      this.callApiService.getProvinceByIdRegione(idReg).subscribe(result => {\n        this.provSelectedList = result;\n      }, error => {\n        console.log('failed calc', error);\n      });\n    } // tslint:disable-next-line: typedef\n\n\n    getAllComuniFromAPI() {\n      this.callApiService.getComuni(this.comSelected).subscribe(result => {\n        this.comSelected = result;\n      }, error => {\n        console.log('failed calc', error);\n      });\n    }\n\n    changeRegione(event) {\n      const idRegione = Number(event.target.value);\n      this.comSelected = [];\n      this.isVisibleLink = false;\n\n      if (idRegione === 0) {\n        this.provSelectedList = [];\n      } else {\n        /* const result = province.filter(p => p.IdRegione === idRegione);\r\n        this.provSelected = result; */\n        this.provSelectedList = this.getProvinceOfIdRegioneFromAPI(idRegione);\n      }\n    }\n\n    changeProvincia(event) {\n      const idProvincia = Number(event.target.value);\n      this.isVisibleLink = false;\n\n      if (idProvincia === 0) {\n        this.provSelectedList = [];\n        this.comSelected = [];\n      } else {\n        const result = comuni.filter(p => p.IdProvincia === idProvincia);\n        this.comSelected = result;\n      }\n    }\n\n    changeComune(event) {\n      const idComune = Number(event.target.value);\n      this.isVisibleLink = false;\n\n      if (idComune > 0) {\n        this.isVisibleLink = true;\n      }\n    }\n\n  }\n\n  RegioniListComponent.ɵfac = function RegioniListComponent_Factory(t) {\n    return new (t || RegioniListComponent)(i0.ɵɵdirectiveInject(i1.RESTAPIService));\n  };\n\n  RegioniListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegioniListComponent,\n    selectors: [[\"app-regioni-list\"]],\n    decls: 16,\n    vars: 4,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-sm-4\"], [3, \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"style\", \"margin-top: 6%;\", 4, \"ngIf\"], [3, \"value\"], [2, \"margin-top\", \"6%\"], [\"href\", \"daticomune\"]],\n    template: function RegioniListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\");\n        i0.ɵɵtext(1, \"Manca bootstrap\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1)(4, \"div\", 2)(5, \"h3\");\n        i0.ɵɵtext(6, \"Regione\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"select\", 3);\n        i0.ɵɵlistener(\"change\", function RegioniListComponent_Template_select_change_7_listener($event) {\n          return ctx.changeRegione($event);\n        });\n        i0.ɵɵelementStart(8, \"option\");\n        i0.ɵɵtext(9, \"seleziona regione\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, RegioniListComponent_option_10_Template, 2, 2, \"option\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 2);\n        i0.ɵɵtemplate(12, RegioniListComponent_div_12_Template, 7, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 2);\n        i0.ɵɵtemplate(14, RegioniListComponent_div_14_Template, 7, 1, \"div\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(15, RegioniListComponent_div_15_Template, 3, 0, \"div\", 6);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.regioneList);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.provSelectedList.length > 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.comSelected.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isVisibleLink);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf]\n  });\n  return RegioniListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}